clear

setpath;

load(fullfile(datapath, 'data.mat'));
load(detfile);
load(fullfile(datapath, 'kitti_ids_new.mat'));

params = learn_params(data, dets);
%%
cachepath = fullfile(rootpath, 'ContextW/data/');

occpath = 'occdet';
nmspath = 'nmsdet';
%%
% wall = [10 2 10; 5 1 5; 10 1 10; 10 1 4; 10 1 5; 10 1 6; 10 1 3; 2 1 2; 2 1 4; ];
wall = [1 1 1; 1 1 2; 1 1 4; 1 1 6; 1 1 8; 1 1 10; ...
        2 1 1; 2 1 2; 2 1 4; 2 1 6; 2 1 8; 2 1 10; ...
        4 1 1; 4 1 2; 4 1 4; 4 1 6; 4 1 8; 4 1 10; ...
        6 1 1; 6 1 2; 6 1 4; 6 1 6; 6 1 8; 6 1 10; ...
        8 1 1; 8 1 2; 8 1 4; 8 1 6; 8 1 8; 8 1 10; ...
        1 2 1; 1 2 2; 1 2 4; 1 2 6; 1 2 8; 1 2 10; ...
        2 2 1; 2 2 2; 2 2 4; 2 2 6; 2 2 8; 2 2 10; ...
        4 2 1; 4 2 2; 4 2 4; 4 2 6; 4 2 8; 4 2 10; ...
        6 2 1; 6 2 2; 6 2 4; 6 2 6; 6 2 8; 6 2 10; ...
        8 2 1; 8 2 2; 8 2 4; 8 2 6; 8 2 8; 8 2 10; ...
        1 4 1; 1 4 2; 1 4 4; 1 4 6; 1 4 8; 1 4 10; ...
        2 4 1; 2 4 2; 2 4 4; 2 4 6; 2 4 8; 2 4 10; ...
        4 4 1; 4 4 2; 4 4 4; 4 4 6; 4 4 8; 4 4 10; ...
        6 4 1; 6 4 2; 6 4 4; 6 4 6; 6 4 8; 6 4 10; ...
        8 4 1; 8 4 2; 8 4 4; 8 4 6; 8 4 8; 8 4 10;];
  %%  
aps = zeros(size(wall, 1), 3);
for i = 1:size(wall, 1)
    a = wall(i, 1);
    b = wall(i, 2);
    c = wall(i, 3);
    
    onebatch;
    
    aps(i, :) = a1;
    
    drawnow;
end